# 前端埋点方案，现有主流方案
>埋点：埋点即监控用户在应用表现层的行为，于产品迭代而言至关重要，运营，产品，数据分析基于此来对用户行为进行分析统计，同时埋点也可作为一种前端监控的手段，检验功能是否达预期的佐证。  
>基于埋点数据进行用户行为分析，可以得到包含页面点击量、用户访问量、用户访问路径、用户转化率、导流转化率、用户访问时长和用户访问内容分析等重要数据。

## 可埋点数据
>type - 上报类型  
appid - 设备id  
screen - 屏幕信息  
userAgent - 浏览器信息  
userInfo - 用户身份信息  
timestamp - 上报时间  
document.referrer - 访问来源  
action - 上报事件的动作类型  
element - 触发上报的元素  
地理位置,访问渠道  
>以及其他自定义数据params等等  

## 埋点方案
**前端埋点大致分为：代码埋点、可视化埋点、无痕埋点三种。**
### 代码埋点
**代码埋点，就是以嵌入代码的形式进行埋点，完全由开发控制埋点的位置时间和触发机制。比如需要监控用户的点击事件，会选择在用户点击时，插入一段代码，保存这个监听行为或者直接将监听行为以某一种数据格式直接传递给server端。此外比如需要统计产品的PV和UV的时候，需要在网页的初始化时，发送用户的访问信息等。**  
优点：可以在任意时刻，精确的发送或保存所需要的数据信息  
缺点：工作量较大，每一个组件的埋点都需要添加相应的代码  
*使用第三方sdk埋点*
>如百度统计、友盟、TalkingData、Google Analytics、Sensors Analytics等都提供了这一方案。

使用相对简单，在APP或者界面初始化的时候，初始化第三方数据分析服务商的SDK，然后在某个事件发生时就调用SDK里面相应的数据发送接口发送数据。例如，我们想统计APP里面某个按钮的点击次数，则在APP的某个按钮被点击时，可以在这个按钮对应的 OnClick 函数里面调用SDK提供的数据发送接口来发送数据。  
除此针对特定需求也可以统一封装数据上报通用sdk，各页面各业务模块按需调用，同时埋点的形式也是多种多样的  
*基于事件点击埋点*  
*页面访问埋点-统计页面曝光时长*  
>传统基于DOMContentLoaded、beforeunload、onload等也可以实现

*css埋点*  
**埋点数据上报的形式**  
*xhr上报*  
*img/iframe/script上报*  
